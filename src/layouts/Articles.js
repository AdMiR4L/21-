
import FeedImage from "../assets/delete/article.png"
import './Articles.css'
import axios from "axios";
import toast from "react-hot-toast";
import {useEffect, useState} from "react";
import ConvertToShamsiDate from "../components/ConverToShamsiDate";





function Articles(props) {

    function removeHtmlTags(str) {
        // Step 1: Remove HTML tags
        const noTags = str.replace(/<\/?[^>]+(>|$)/g, "");

        // Step 2: Decode HTML entities
        const textArea = document.createElement("textarea");
        textArea.innerHTML = noTags;
        return textArea.value;
    }
    const [loading, setLoading] = useState(true);
    const [articles, setArticles] = useState();

    function  getArticles(){
        axios.get(process.env.REACT_APP_API+"articles", )
            .then(response => {
                setArticles(response.data.articles);
                setLoading(false);
            })
            .catch(error => {
                console.log(error);;
                setLoading(false);
            });
    }
    useEffect(() => {
        getArticles()
    }, []);
    return (
        <section className="articles">
            <div className="row">
                <div className="col-12 section-top">
                    <div className="section-header">
                        <h3 className="head">
                            اخبار و مقالات
                        </h3>
                        <h4 className="notice mb-0">
                            مقالات آموزشی بازی مافیا مناسب سطوح مختلف
                        </h4>
                    </div>
                    <div className="header-more">
                        <svg className="more-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36.52 23.48">
                            <path
                                d="M.58,13.13c.4.65.97,1.17,1.66,1.49.33.15.46.54.31.87s-.54.46-.87.31h0c-.26-.13-.51-.27-.75-.44.72,2.12,2.7,3.55,4.94,3.55h.04c-.04-.36-.05-.72-.03-1.08.29-3.48,3.22-6.14,6.71-6.09h3.71c.36,0,.65-.29.65-.65h0c0-1.08.88-1.96,1.96-1.96h1.96c.36.03.63.34.6.7-.03.32-.28.57-.6.6h-1.96c-.36,0-.65.29-.65.65h0c0,1.08-.87,1.96-1.95,1.96,0,0,0,0,0,0h-3.71c-2.8-.05-5.16,2.08-5.41,4.87-.03.49,0,.99.12,1.47.03.13.06.25.1.38.04.15.1.3.16.45l.02.04c.62,1.49,1.9,2.62,3.46,3.05h.05c.12.04.24.07.36.09.06.01.12.02.19.03.09.01.18.03.27.03.16.01.33.02.49.02,1.65,0,3.2-.79,4.18-2.11-.31-.2-.61-.41-.89-.65-.26-.25-.28-.66-.03-.92.23-.24.6-.28.87-.08,3.32,2.76,8.24,2.31,11-1.01.33-.4.63-.83.87-1.29-.35-.48-.62-1.01-.79-1.57-.1-.35.09-.71.44-.81.35-.1.71.09.81.44.61,2.07,2.78,3.26,4.86,2.65,2.07-.61,3.26-2.78,2.65-4.86-.31-1.04-1.03-1.91-2-2.4-.08.38-.19.75-.33,1.11-.14.33-.52.49-.86.35-.32-.14-.48-.5-.36-.82.2-.53.34-1.08.4-1.64.01-.09.02-.17.02-.26.01-.16.02-.31.02-.47,0-2.83-1.82-5.34-4.52-6.2.2.31.39.64.55.97.16.32.04.71-.29.88-.32.16-.71.04-.88-.29,0-.02-.01-.03-.02-.05-1.56-3.29-5.49-4.69-8.78-3.13-.24.11-.48.24-.7.39-.3.2-.71.11-.91-.19s-.11-.71.19-.91c.1-.06.2-.12.3-.18-1.38-.66-3-.56-4.3.25.3.27.57.57.81.9.21.3.13.7-.16.91-.3.21-.7.13-.91-.16h0c-.31-.44-.7-.81-1.16-1.09h0c-1.7-1.06-3.92-.65-5.13.94.26.07.51.17.75.28.33.15.46.54.31.87s-.54.46-.87.31c-1.96-.92-4.29-.08-5.2,1.88-.1.22-.19.45-.25.69.35-.13.71-.23,1.09-.28.36-.05.69.2.74.55s-.2.69-.55.74c-.6.09-1.16.31-1.66.65h0C-.02,9.05-.5,11.34.57,13.11c0,0,0,.02,0,.02Z"/>
                        </svg>
                        مشـاهـده بیـشـتـر
                    </div>
                </div>
                {!loading ?
                    articles.map((item, index) => (
                        <div key={index} className="col-lg-4 mt-2 mb-3">
                            <article className="article">
                                <div className="img-container">
                                   {/* <img src={FeedImage} alt=""/>*/}


                                    <svg className="blank-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.67 426.67">
                                        <path  d="M12.37,362.88l-.43.43c-5.76-12.59-9.39-26.88-10.88-42.67,1.49,15.57,5.55,29.65,11.31,42.24ZM149.33,178.77c28.04,0,50.78-22.73,50.78-50.77s-22.73-50.78-50.77-50.78h0c-28.04,0-50.77,22.74-50.77,50.78,0,28.04,22.73,50.77,50.77,50.77Z"/>
                                        <path d="M302.72,0H123.95C46.29,0,0,46.29,0,123.95v178.77c0,23.25,4.05,43.52,11.95,60.59,18.35,40.53,57.6,63.36,112,63.36h178.77c77.65,0,123.95-46.29,123.95-123.95V123.95C426.67,46.29,380.37,0,302.72,0ZM391.89,224c-16.64-14.29-43.52-14.29-60.16,0l-88.75,76.16c-16.64,14.29-43.52,14.29-60.16,0l-7.25-5.97c-15.15-13.23-39.25-14.51-56.32-2.99l-79.79,53.55c-4.69-11.95-7.47-25.81-7.47-42.03V123.95c0-60.16,31.79-91.95,91.95-91.95h178.77c60.16,0,91.95,31.79,91.95,91.95v102.4l-2.77-2.35Z"/>
                                    </svg>
                                    {/*<svg className="blank-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 416 416">
                                        <path d="M169.6,0h-.7C142.61,0,121.9,0,105.24,1.37c-16.98,1.39-31.19,4.27-44.07,10.84-21.08,10.74-38.22,27.88-48.96,48.96-6.57,12.89-9.45,27.09-10.84,44.07-1.37,16.66-1.37,37.38-1.37,63.66v78.21c0,26.28,0,47,1.37,63.66,1.39,16.98,4.27,31.19,10.84,44.1,10.74,21.07,27.88,38.21,48.96,48.94,12.89,6.57,27.09,9.45,44.07,10.84,16.66,1.37,37.38,1.37,63.66,1.37h78.21c26.28,0,47,0,63.66-1.37,16.98-1.39,31.19-4.27,44.1-10.84,21.07-10.74,38.2-27.88,48.94-48.96,6.57-12.89,9.45-27.09,10.84-44.07,1.37-16.66,1.37-37.38,1.37-63.66v-78.21c0-26.28,0-47-1.37-63.66-1.39-16.98-4.27-31.19-10.84-44.07-10.74-21.08-27.88-38.22-48.96-48.96-12.89-6.57-27.09-9.45-44.07-10.84-16.66-1.37-37.38-1.37-63.66-1.37h-77.5ZM33.13,306.6l.13,1.56c1.22,15.02,3.56,24.53,7.47,32.17,7.67,15.05,19.91,27.28,34.97,34.94,7.62,3.9,17.13,6.25,32.15,7.47,15.21,1.24,34.62,1.26,61.76,1.26h76.8c27.14,0,46.55,0,61.74-1.26,15.02-1.22,24.53-3.56,32.17-7.47,15.06-7.67,27.31-19.91,34.99-34.97,3.88-7.64,6.23-17.15,7.47-32.17l.11-1.54-13.55-13.25-.45-.45c-6.61-6.67-13.46-13.09-20.54-19.24-6.14-5.12-12.48-9.34-20.05-11.75-11.63-3.72-24.13-3.72-35.75,0-7.57,2.41-13.91,6.66-20.05,11.75-5.89,4.91-12.57,11.43-20.54,19.24l-.28.28-35.26-40.75-.43-.51c-7.89-9.11-14.46-16.7-20.31-22.42-6.1-5.97-12.46-10.99-20.33-14.02-12.02-4.63-25.23-5.18-37.59-1.56-8.11,2.35-14.87,6.83-21.42,12.27-6.31,5.21-13.48,12.22-22.1,20.65l-.49.47-60.59,59.29ZM293.33,165.33c23.56,0,42.67-19.1,42.67-42.67s-19.1-42.67-42.67-42.67-42.67,19.1-42.67,42.67,19.1,42.67,42.67,42.67Z"/>
                                    </svg>*/}
                                </div>
                                <div className="share">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.38 13.2">
                                        <path
                                            d="M10.06,8.56c-.74,0-1.43.35-1.86.95l-3.66-1.87c.16-.5.13-1.03-.07-1.51l3.83-2.3c.83.96,2.29,1.07,3.26.24.96-.83,1.07-2.29.24-3.26-.83-.96-2.29-1.07-3.26-.24-.51.44-.8,1.08-.8,1.76,0,.29.06.57.16.83l-3.84,2.31c-.84-.96-2.31-1.06-3.27-.22-.96.84-1.06,2.31-.22,3.27.84.96,2.31,1.06,3.27.22.14-.12.26-.25.36-.4l3.65,1.87c-.07.22-.11.45-.11.68,0,1.28,1.04,2.32,2.32,2.32s2.32-1.04,2.32-2.32-1.04-2.32-2.32-2.32h0Z"/>
                                    </svg>
                                </div>
                                <ul className="content">
                                    <li className="head">
                                        <a href="/">
                                            <h5>{item.title}</h5>
                                        </a>
                                    </li>
                                    <li className="description">
                                       <p>
                                           {removeHtmlTags(item.description).substring(0, 100)}
                                           ...
                                       </p>
                                    </li>
                                    <li className="footer">
                                        <ul className="foot-items">
                                            <li className="item">
                                                {item.dislike}
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.81 18">
                                                    <path
                                                        d="M6.51,18c-.22,0-.44-.03-.67-.08-.75-.19-1.35-.63-1.72-1.25-.37-.62-.48-1.35-.31-2.06.08-.3.2-.58.37-.84l1.61-2.42h-3.09c-1.5,0-2.72-1.22-2.72-2.72,0-.18.02-.36.05-.53L1.23,2.18C1.49.92,2.61,0,3.9,0h13.16c.41,0,.75.34.75.75v9.85c0,.41-.34.75-.75.75h-3.59l-4.89,5.71c-.53.61-1.28.95-2.06.95ZM3.9,1.5c-.58,0-1.08.41-1.2.98l-1.18,5.91c-.02.08-.02.16-.02.24,0,.67.55,1.22,1.22,1.22h4.49c.28,0,.53.15.66.4.13.24.12.54-.04.77l-2.39,3.58c-.08.12-.13.24-.17.38-.08.32-.03.64.14.92s.43.48.75.56c.5.12.97-.02,1.27-.38l4.93-5.76V1.5H3.9ZM13.87,9.85h2.44V1.5h-2.44v8.35Z"/>
                                                </svg>
                                            </li>
                                            <li className="item">
                                                {item.like}
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.81 18">
                                                    <path
                                                        d="M11.29,0c.22,0,.44.03.67.08.75.19,1.35.63,1.72,1.25.37.62.48,1.35.31,2.06-.08.3-.2.58-.37.84l-1.61,2.42h3.09c1.5,0,2.72,1.22,2.72,2.72,0,.18-.02.36-.05.53l-1.18,5.91c-.25,1.26-1.38,2.18-2.67,2.18H.75c-.41,0-.75-.34-.75-.75V7.41c0-.41.34-.75.75-.75h3.59L9.23.95c.53-.61,1.28-.95,2.06-.95ZM13.91,16.5c.58,0,1.08-.41,1.2-.98l1.18-5.91c.02-.08.02-.16.02-.24,0-.67-.55-1.22-1.22-1.22h-4.49c-.28,0-.53-.15-.66-.4-.13-.24-.12-.54.04-.77l2.39-3.58c.08-.12.13-.24.17-.38.08-.32.03-.64-.14-.92s-.43-.48-.75-.56c-.5-.12-.97.02-1.27.38l-4.93,5.76v8.82h8.47ZM3.94,8.16H1.5v8.35h2.44v-8.35Z"/>
                                                </svg>

                                            </li>
                                            <li className="item release">
                                                <ConvertToShamsiDate gregorianDate={item.created_at} article={1}/>
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.1 18.1">
                                                    <path
                                                        d="M9.96,18.1h-4.53c-.5,0-.9-.4-.9-.9s.4-.9.9-.9h4.53c3.12,0,5.75-2.24,6.25-5.32.28-1.67-.12-3.35-1.11-4.73-.99-1.38-2.45-2.29-4.13-2.56-.33-.05-.68-.08-1.03-.08-3.18,0-5.89,2.39-6.29,5.55-.06.49-.51.84-1.01.78-.49-.06-.84-.51-.78-1C2.39,4.88,5.86,1.81,9.96,1.81c.44,0,.88.04,1.3.1,2.16.35,4.04,1.52,5.31,3.29s1.77,3.92,1.42,6.07c-.65,3.95-4.03,6.82-8.03,6.83ZM7.24,15.39H2.71c-.5,0-.9-.4-.9-.9s.4-.9.9-.9h4.53c.5,0,.9.4.9.9s-.4.9-.9.9ZM5.43,12.67H.9c-.5,0-.9-.4-.9-.9s.4-.9.9-.9h4.53c.5,0,.9.4.9.9s-.4.9-.9.9ZM9.96,10.86c-.5,0-.9-.4-.9-.9v-3.62c0-.5.4-.9.9-.9s.9.4.9.9v3.62c0,.5-.4.9-.9.9ZM11.77,1.8h-3.62c-.5,0-.9-.4-.9-.9s.4-.9.9-.9h3.62c.5,0,.9.4.9.9s-.4.9-.9.9Z"/>
                                                </svg>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>

                            </article>
                        </div>
                    ))
                    : "Loading"}
            </div>
        </section>

    );
}

export default Articles;